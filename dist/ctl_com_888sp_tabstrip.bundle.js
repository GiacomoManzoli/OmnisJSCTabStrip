!function(t,e){for(var r in e)t[r]=e[r]}(window,function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(1))},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.foo=function(){console.log("Foo")};var a=r(2),i={autoupdate:"$autoupdate",canclosetab:"$canclosetab",canaddtab:"$canaddtab",activecolor:"$activecolor",backgroundcolor:"$backgroundcolor",backgroundtabactivecoloractive:"$backgroundtabactivecoloractive",backgroundtabcolor:"$backgroundtabcolor",bordercolor:"$bordercolor",textcolor:"$textcolor",textactivecolor:"$textactivecolor"},c=1,s=2,l=3,u=function(t){function e(){var e=t.call(this)||this;return e.autoUpdate=!1,e.init_class_inst(),e}return o(e,t),e.prototype.init_ctrl_inst=function(e,r,n,o){var u=this;t.prototype.init_ctrl_inst.call(this,e,r,n,o);var d=this.getClientElem(),p=JSON.parse(d.getAttribute("data-props"));for(var b in this.tabStrip=new a.TabStrip(d),this.tabStrip.addEventListener("tabclick",(function(t,e,r,n){u.autoUpdate&&u.tabStrip.setActive(e),u.canSendEvent(l)&&(u.eventParamsAdd("pTabNum",r+1),u.sendEvent("evTabClick"))})),this.tabStrip.addEventListener("tabclose",(function(t,e,r,n){u.autoUpdate&&u.tabStrip.closeTab(e),u.canSendEvent(c)&&(u.eventParamsAdd("pTabNum",r+1),u.sendEvent("evTabClose"))})),this.tabStrip.addEventListener("tabadd",(function(t){u.autoUpdate,u.canSendEvent(s)&&u.sendEvent("evTabAdd")})),i){var f=p[b];this.setProperty(i[b],f)}return this.update(),!1},e.prototype.updateCtrl=function(t,e,r,n){var o=this.getClientElem();console.log("update",arguments),o.style.lineHeight=o.style.height,o.style.textAlign="center";var a=this.getData(),i=new omnis_list(a);if(this.mData=a,o.innerHTML="",a){var c=[],s=i.getCurrentRow(),l=s>0?s:1;console.log(s,l);for(var u=1;u<=i.getRowCount();u++)c.push({id:i.getData("id",u),title:i.getData("title",u),active:u==l});console.log(c),this.tabStrip.setTabs(c),this.tabStrip.render()}},e.prototype.handleEvent=function(e){if(!this.isEnabled())return!0;switch(e.type){case"click":return!0}t.prototype.handleEvent.call(this,e)},e.prototype.getCanAssign=function(e){return Object.values(i).includes(e.toString())||t.prototype.getCanAssign.call(this,e)},e.prototype.setProperty=function(e,r){if(!this.getCanAssign(e))return!1;if(e)switch(e){case i.activecolor:return this.tabStrip.setCssVar(a.CssVar.activeColor,r),!0;case i.backgroundcolor:return this.tabStrip.setCssVar(a.CssVar.backgroundColor,r),!0;case i.backgroundtabactivecoloractive:return this.tabStrip.setCssVar(a.CssVar.backgroundTabActiveColor,r),!0;case i.backgroundtabcolor:return this.tabStrip.setCssVar(a.CssVar.backgroundTabColor,r),!0;case i.textactivecolor:return this.tabStrip.setCssVar(a.CssVar.textActiveColor,r),!0;case i.textcolor:return this.tabStrip.setCssVar(a.CssVar.textColor,r),!0;case i.bordercolor:return this.tabStrip.setCssVar(a.CssVar.borderColor,r),!0;case i.canaddtab:return this.tabStrip.canAddTab=r,!0;case i.canclosetab:return this.tabStrip.canCloseTab=r,!0;case i.autoupdate:return this.autoUpdate=r,!0}return t.prototype.setProperty.call(this,e,r)},e.prototype.getProperty=function(e){switch(e){case i.activecolor:return this.tabStrip.getCssVar(a.CssVar.activeColor);case i.backgroundcolor:return this.tabStrip.getCssVar(a.CssVar.backgroundColor);case i.backgroundtabactivecoloractive:return this.tabStrip.getCssVar(a.CssVar.backgroundTabActiveColor);case i.backgroundtabcolor:return this.tabStrip.getCssVar(a.CssVar.backgroundTabColor);case i.textactivecolor:return this.tabStrip.getCssVar(a.CssVar.textActiveColor);case i.textcolor:return this.tabStrip.getCssVar(a.CssVar.textColor);case i.bordercolor:return this.tabStrip.getCssVar(a.CssVar.borderColor);case i.canaddtab:return this.tabStrip.canAddTab;case i.canclosetab:return this.tabStrip.canCloseTab;case i.autoupdate:return this.autoUpdate}return t.prototype.getProperty.call(this,e)},e}(ctrl_base);e.ctrl_com_888sp_tabstrip=u},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n};Object.defineProperty(e,"__esModule",{value:!0});var o,a=function(t){this.id=0,this.title="",this.active=!1,t.id&&(this.id=t.id),t.title&&(this.title=t.title)};e.Tab=a,r(3),function(t){t.activeColor="--my-active-color",t.backgroundColor="--my-bkg-color",t.backgroundTabActiveColor="--my-bkg-tab-active-color",t.backgroundTabColor="--my-bkg-tab-color",t.borderColor="--my-border-color",t.textColor="--my-text-color",t.textActiveColor="--my-text-active-color"}(o=e.CssVar||(e.CssVar={}));var i={id:-1,title:"",action:"add",active:!1},c=function(){function t(t){this.activeColor="#FF3333",this.canAddTab=!0,this.canCloseTab=!0,this.tabs=[],this.container=t,t.classList.add("my-tabstrip"),this.handlers=new Map}return t.prototype.setTabs=function(t){this.tabs=n(t),this.canAddTab&&this.tabs.push(i)},t.prototype.setCssVar=function(t,e){console.log(o.activeColor,e),this.container.style.setProperty(t,e)},t.prototype.getCssVar=function(t){return getComputedStyle(this.container).getPropertyValue(t)},t.prototype.addEventListener=function(t,e){this.handlers.set(t,e)},t.prototype.setActive=function(t){this.tabs.find((function(t){return t.active})).active=!1,this.tabs.find((function(e){return e.id==t})).active=!0,this.render()},t.prototype.closeTab=function(t){this.tabs=this.tabs.filter((function(e){return e.id!==t})),this.tabs.find((function(t){return t.active}))||(this.tabs[0].active=!0),this.render()},t.prototype.addTab=function(){var t=this.tabs.reduce((function(t,e){return Math.max(t,e.id)}),0)+1,e={id:t,title:"Nuovo tab",active:!1};return this.tabs=this.tabs.filter((function(t){return t.id>0})).concat([e,this.addTab?i:void 0]),this.setActive(t),this.render(),e},t.prototype.onTabClick=function(t,e,r,n){t.preventDefault(),t.stopPropagation();var o=this.handlers.get("tabclick");o&&o(t,e,r,n)},t.prototype.onTabCloseClick=function(t,e,r,n){t.preventDefault(),t.stopPropagation();var o=this.handlers.get("tabclose");o&&o(t,e,r,n)},t.prototype.onTabAddClick=function(t,e,r,n){t.preventDefault(),t.stopPropagation();var o=this.handlers.get("tabadd");o&&o(t,e,r,n)},t.prototype.render=function(){var t=this;console.log(this),this.container.innerHTML="";var e=document.createElement("ul");e.classList.add("my-tabstrip-ul"),this.tabs.map((function(e,r){return t.createItem(e,r)})).forEach((function(t){return e.appendChild(t)})),this.container.appendChild(e)},t.prototype.createItem=function(t,e){return"add"===t.action?this.createAddTab(t,e):this.createTab(t,e)},t.prototype.createAddTab=function(t,e){var r=this,n=document.createElement("li");n.classList.add("my-tabstrip-li"),n.classList.add("action-add");var o=document.createElement("a");return o.innerHTML="+",o.addEventListener("click",(function(){r.onTabAddClick(event,t.id,e,t)})),n.append(o),n},t.prototype.createTab=function(t,e){var r=this,n=document.createElement("li");n.classList.add("my-tabstrip-li"),t.active&&n.classList.add("active"),n.addEventListener("click",(function(){r.onTabClick(event,t.id,e,t)}));var o=document.createElement("a");return o.classList.add("my-tabstrip-li-a"),o.innerText=t.title,n.append(o),this.canCloseTab&&n.append(this.createCloseIcon(t,e)),n},t.prototype.createCloseIcon=function(t,e){var r=this,n=document.createElement("span");return n.classList.add("my-tabstrip-li-icon"),n.innerHTML="&#x2715;",t.active&&n.classList.add("active-icon"),n.addEventListener("click",(function(){r.onTabCloseClick(event,t.id,e,t)})),n},t}();e.TabStrip=c},function(t,e,r){var n=r(4),o=r(5);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var a={insert:"head",singleton:!1},i=(n(o,a),o.locals?o.locals:{});t.exports=i},function(t,e,r){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}t[e]=r}return t[e]}}(),i=[];function c(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function s(t,e){for(var r={},n=[],o=0;o<t.length;o++){var a=t[o],s=e.base?a[0]+e.base:a[0],l=r[s]||0,u="".concat(s," ").concat(l);r[s]=l+1;var d=c(u),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:u,updater:h(p,e),references:1}),n.push(u)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function p(t,e,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=d(e,o);else{var a=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}function b(t,e,r){var n=r.css,o=r.media,a=r.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),a&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var f=null,v=0;function h(t,e){var r,n,o;if(e.singleton){var a=v++;r=f||(f=l(e)),n=p.bind(null,r,a,!1),o=p.bind(null,r,a,!0)}else r=l(e),n=b.bind(null,r,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var r=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var o=c(r[n]);i[o].references--}for(var a=s(t,e),l=0;l<r.length;l++){var u=c(r[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}r=a}}}},function(t,e,r){(e=r(6)(!1)).push([t.i,".my-tabstrip-container {\n    --my-active-color: #ff8a00;\n    --my-bkg-color: #ffffff;\n    --my-bkg-tab-active-color: #fff;\n    --my-bkg-tab-color: #f0f0f0;\n    --my-border-color: #333333;\n    --my-text-color: inherit;\n    --my-text-active-color: inherit;\n}\n\n.my-tabstrip-ul {\n    padding: 0;\n    margin: 0;\n    list-style-type: none;\n    height: 100%;\n    display: flex;\n    color: var(--my-text-color);\n    flex-direction: row;\n    flex-wrap: nowrap;\n    align-items: stretch;\n    background-color: var(--my-bgk-color);\n    line-height: initial;\n    text-align: initial;\n}\n\n.my-tabstrip-li {\n    cursor: default;\n    font-size: 12px;\n    width: 160px;\n    padding: 8px;\n    border: 1px solid var(--my-border-color);\n    border-left: 0px;\n    display: flex;\n    align-items: center;\n    background-color: var(--my-bkg-tab-color);\n    margin-bottom: -1px;\n    display: flex;\n    min-width: 0; /* Serve per far andare overflow ellipsis */\n}\n\n.my-tabstrip-li:hover {\n    /* background-color: #fafafa; */\n    filter: brightness(1.05);\n}\n\n.my-tabstrip-li-a {\n    flex: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.my-tabstrip-li-icon {\n    /* cursor: pointer; */\n    padding: 2px 4px;\n    background-color: var(--my-bkg-tab-color);\n}\n.my-tabstrip-li-icon:hover {\n    filter: brightness(1.05);\n    color: var(--my-active-color);\n}\n\n.my-tabstrip:first-child {\n    border-left: 1px solid var(--my-border-color) !important;\n}\n\n.active {\n    background-color: var(--my-bkg-tab-active-color) !important;\n    border-bottom-color: var(--my-bkg-tab-active-color);\n    box-shadow: inset 0px 3px var(--my-active-color);\n    border-top: var(--my-active-color) !important;\n    color: var(--my-text-active-color);\n}\n\n.active:hover {\n    filter: none !important;\n}\n\n.active-icon {\n    background-color: var(--my-bkg-tab-active-color) !important;\n}\n\n.action-add {\n    width: initial !important;\n    background-color: var(--my-bgk-color);\n    border: 0;\n    align-items: center;\n}\n.action-add a {\n    font-size: 20px;\n    height: 16px;\n    line-height: 16px;\n    padding: 2px;\n    border-radius: 4px;\n}\n.action-add a:hover {\n    color: var(--my-active-color);\n}\n",""]),t.exports=e},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(i=n,c=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[r].concat(a).concat([o]).join("\n")}var i,c,s;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);n&&o[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),e.push(s))}},e}}]));